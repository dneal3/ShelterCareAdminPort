(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,n){e.exports=n(49)},35:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(26),u=n.n(i),r=(n(35),n(14)),o=n(12),l=function(){return s.a.createElement("div",null,s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement(r.b,{to:"/signin"},"Sign In")),s.a.createElement("li",null,s.a.createElement(r.b,{to:"/"},"Landing")),s.a.createElement("li",null,s.a.createElement(r.b,{to:"/home"},"Home"))))},c=n(4),d=n(5),m=n(10),p=n(9),f=n(11),g=s.a.createContext(null),h=n(8),b=n.n(h),y=(n(42),n(44),{apiKey:"AIzaSyDWT1HRjJ-p0jH5pjQPtWLSVuZ2xxyWIDU",authDomain:"hfac-sc.firebaseapp.com",databaseURL:"https://hfac-sc.firebaseio.com",projectId:"hfac-sc",storageBucket:"hfac-sc.appspot.com",messagingSenderId:"432119133740"});function E(e){return e.replace(/\./g,"").replace(/#/g,"").replace(/\$/g,"").replace(/\[/g,"").replace(/\]/g,"")}function v(e){var t=b.a.database().ref(),n=E(e.adding),a="/"+e.type+"s/"+n;t.child(a).once("value").then(function(n){if(!n.exists()){var s={};return s[a]=!0,t.update(s),void e.statusFunc("Successfully added "+e.type+" "+e.adding)}e.statusFunc("Failed to add "+e.type+" "+e.adding+"\n REASON: "+e.type+" already exists in database")}).catch(function(t){alert("An error occurred: ",t),e.statusFunc("Failed to add "+e.type+" "+e.adding+" REASON: "+t)})}function k(e){var t=b.a.database().ref(),n=E(e.deleting),a="/"+e.type+"s/"+n;t.child(a).once("value").then(function(n){if(n.exists()){var s="are you sure you want to delete the "+e.type+" "+e.deleting+"?";window.confirm(s)?(t.child(a).remove(),e.statusFunc("Successfully deleted "+e.type+" "+e.deleting)):e.statusFunc("Deletion of "+e.type+" "+e.deleting+" aborted by user")}else alert("This "+e.type+" does not exist in the database"),e.statusFunc(e.type+" "+e.deleting+" does not exist in database")}).catch(function(t){alert("An error occurred: ",t),e.statusFunc("Failed to delete "+e.type+" "+e.deleting+"/n REASON: "+t)})}var S=function(){function e(){Object(c.a)(this,e),b.a.initializeApp(y),console.log("firebase intialized")}return Object(d.a)(e,[{key:"doSignIn",value:function(e){var t=b.a.auth();if(null==t.currentUser){console.log("signing in");var n=new b.a.auth.GoogleAuthProvider;t.signInWithPopup(n).then(function(t){!function(e,t){var n=b.a.database().ref(),a="/admins/"+E(e.email);console.log("database query: "+a),n.child(a).once("value").then(function(n){n.exists()?t(e,!0):(alert("Signed in email is not an admin, contact system admin if this is incorrect"),b.a.auth().signOut())})}({email:t.user.email,name:t.user.displayName},e)}).catch(function(e){"auth/popup-closed-by-user"===e.code?console.log("Sign in window closed by user before finalizing authentication"):alert(e)})}else console.log("user already signed in")}},{key:"doSignOut",value:function(e){var t=b.a.auth();null!=t.currentUser&&(t.signOut(),e(),console.log("signed out"))}},{key:"doSearch",value:function(e,t){var n=b.a.database().ref(),a="/"+E(e.type)+"s/";console.log("searching objects at "+a),n.child(a).once("value").then(function(n){n.exists()?(e.updateListBind("",!0),n.forEach(function(t){var n=e.substr.toLowerCase();(""+t.key).toLowerCase().includes(n)&&e.updateListBind(t.key)})):t("Could not search "+e.type+"s as they do not exist in the database")})}},{key:"doAddAdmin",value:function(e,t){v({type:"admin",adding:e,statusFunc:t})}},{key:"doDeleteAdmin",value:function(e,t){k({type:"admin",deleting:e,statusFunc:t})}},{key:"doAddUser",value:function(e,t){v({type:"user",adding:e,statusFunc:t})}},{key:"doDeleteUser",value:function(e,t){k({type:"user",deleting:e,statusFunc:t})}},{key:"doAddResponse",value:function(e,t){v({type:"response",adding:e,statusFunc:t})}},{key:"doDeleteResponse",value:function(e,t){k({type:"response",deleting:e,statusFunc:t})}},{key:"doAddIssue",value:function(e,t){v({type:"issue",adding:e,statusFunc:t})}},{key:"doDeleteIssue",value:function(e,t){k({type:"issue",deleting:e,statusFunc:t})}},{key:"doAddProgram",value:function(e,t){v({type:"program",adding:e,statusFunc:t})}},{key:"doDeleteProgram",value:function(e,t){k({type:"program",deleting:e,statusFunc:t})}},{key:"checkStatus",value:function(e){var t=b.a.auth();null!=t.currentUser?(console.log("CheckStatus says: user signed in"),e({email:t.currentUser.email,name:t.currentUser.displayName},!0)):console.log("CheckStatus says: no user signed in")}},{key:"test",value:function(){console.log("working")}}]),e}(),O=n(29),C=function(e){function t(){var e;return Object(c.a)(this,t),e=Object(m.a)(this,Object(p.a)(t).call(this)),setTimeout(function(){e.props.firebase.checkStatus(e.props.signInBind)},650),e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return Object(O.timeout)(),s.a.createElement("div",null,s.a.createElement("button",{id:"signIn",onClick:function(){e.props.firebase.doSignIn(e.props.signInBind)}},"Sign in!"))}}]),t}(s.a.Component),A=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("button",{id:"signOutButton",onClick:function(){e.props.firebase.doSignOut(e.props.signOutBind)}},"Sign Out")}}]),t}(s.a.Component),j=n(17),I=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).state={statusStr:"Status: no action yet taken",responseList:[],responseQuery:""},setTimeout(e.init.bind(Object(j.a)(e)),200),e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"init",value:function(){this.setSearch("all")}},{key:"setStatus",value:function(e){this.setState({statusStr:"Status: "+e})}},{key:"updateList",value:function(e){var t;arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t=[]:(t=this.state.responseList).push(e),this.setState({responseList:t})}},{key:"getField",value:function(e){return this.state.responseList.map(function(e){return s.a.createElement("li",{key:e},e)})}},{key:"setSearch",value:function(e,t){"all"===e?window.document.getElementById("searchResponse").click():"response"===e&&window.document.getElementById("searchResponse").click()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("p",null,"Page only for admins to see"),s.a.createElement("p",{id:"statusInformer"},this.state.statusStr)),s.a.createElement(g.Consumer,null,function(t){return s.a.createElement("button",{id:"addAdmin",onClick:function(){t.doAddAdmin("test.AdminsEmail@gmail.com",e.setStatus.bind(e))}},"Add an admin")}),s.a.createElement(g.Consumer,null,function(t){return s.a.createElement("button",{id:"delAdmin",onClick:function(){t.doDeleteAdmin("test.AdminsEmail@gmail.com",e.setStatus.bind(e))}},"Delete an admin")}),s.a.createElement("div",null),s.a.createElement(g.Consumer,null,function(t){return s.a.createElement("button",{id:"addUser",onClick:function(){t.doAddUser("test.UserEmails@gmail.com",e.setStatus.bind(e))}},"Add an User")}),s.a.createElement(g.Consumer,null,function(t){return s.a.createElement("button",{id:"delUser",onClick:function(){t.doDeleteUser("test.UserEmails@gmail.com",e.setStatus.bind(e))}},"Delete an User")}),s.a.createElement("div",null),s.a.createElement(g.Consumer,null,function(t){return s.a.createElement("button",{id:"addIssue",onClick:function(){t.doAddIssue("test issue",e.setStatus.bind(e))}},"Add an issue")}),s.a.createElement(g.Consumer,null,function(t){return s.a.createElement("button",{id:"delIssue",onClick:function(){t.doDeleteIssue("test issue",e.setStatus.bind(e))}},"Delete an issue")}),s.a.createElement("div",null),s.a.createElement("hr",null),s.a.createElement("p",null,"Responses"),s.a.createElement("input",{id:"resSearchInput",type:"text",placeholder:"search",onChange:function(t){e.setSearch("response",t)}}),s.a.createElement("div",null),s.a.createElement(g.Consumer,null,function(t){return s.a.createElement("button",{id:"addResponse",onClick:function(){t.doAddResponse("test response",e.setStatus.bind(e))}},"Add a response")}),s.a.createElement(g.Consumer,null,function(t){return s.a.createElement("button",{id:"delResponse",onClick:function(){t.doDeleteResponse("test response",e.setStatus.bind(e))}},"Delete a response")}),s.a.createElement(g.Consumer,null,function(t){return s.a.createElement("button",{id:"searchResponse",onClick:function(){t.doSearch({type:"response",substr:window.document.getElementById("resSearchInput").value,updateListBind:e.updateList.bind(e)},e.setStatus.bind(e))}},"search responses")}),s.a.createElement("ul",null,this.getField("responses")),s.a.createElement("div",null),s.a.createElement(g.Consumer,null,function(t){return s.a.createElement("button",{id:"addProgram",onClick:function(){t.doAddProgram("test program",e.setStatus.bind(e))}},"Add a program")}),s.a.createElement(g.Consumer,null,function(t){return s.a.createElement("button",{id:"delProgram",onClick:function(){t.doDeleteProgram("test program",e.setStatus.bind(e))}},"Delete a program")}))}}]),t}(s.a.Component),w=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",null,"page for any signed in user to see",s.a.createElement("div",null),"Your name is ",this.props.userName,s.a.createElement("div",null),"Your email is ",this.props.userEmail))}}]),t}(s.a.Component),F=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).state={userSignedIn:!1,user:"",userName:"",isAdmin:!1},e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"signInUser",value:function(e,t){this.setState({userSignedIn:!0,user:e.email,userName:e.name,isAdmin:t})}},{key:"signOutUser",value:function(){this.setState({userSignedIn:!1,user:"",userName:"",isAdmin:!1})}},{key:"render",value:function(){var e=this,t="",n="";return this.state.userSignedIn&&(n=s.a.createElement(w,{userName:this.state.userName,userEmail:this.state.user})),this.state.isAdmin&&(t=s.a.createElement(I,null)),s.a.createElement("div",null,s.a.createElement(g.Consumer,null,function(t){return s.a.createElement(C,{firebase:t,signInBind:e.signInUser.bind(e)})}),s.a.createElement(g.Consumer,null,function(t){return s.a.createElement(A,{firebase:t,signOutBind:e.signOutUser.bind(e)})}),n,t)}}]),t}(s.a.Component),U=function(){return s.a.createElement("div",null,s.a.createElement(r.a,null,s.a.createElement(l,null),s.a.createElement(o.a,{path:"/",component:F}),s.a.createElement(o.a,{path:"/home"})),s.a.createElement("h1",null,"App"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(s.a.createElement(g.Provider,{value:new S},s.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,1,2]]]);
//# sourceMappingURL=main.b5d9417d.chunk.js.map