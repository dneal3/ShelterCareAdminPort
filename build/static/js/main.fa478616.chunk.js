(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){},31:function(e,t,a){e.exports=a(54)},54:function(e,t,a){"use strict";a.r(t);var n=a(8),s=a(22),r=a(0),i=a.n(r),u=a(12),l=a.n(u),d=a(13),o=a(7),c=(a(17),a(2)),p=a(3),m=a(6),h=a(4),b=a(5),f=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{id:"logging"},i.a.createElement("div",{className:"logging-tables"},i.a.createElement("span",null," ","Hello "+this.props.user.userName+"!"," ")),i.a.createElement("div",{className:"logging-tables"},i.a.createElement("span",{id:"statusInformer"}," ","Status: "+this.props.status," ")))}}]),t}(i.a.Component),g=Object(o.b)(function(e){return{status:e.fieldReducer.status}},function(e){return{nada:function(e){}}})(f),y=a(16),v="No elements matching your query were found, to add your query to this list press the add button.",E=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).query=e.query,a.field=a.props.query.toLowerCase(),a.field_upper=a.props.query.toUpperCase(),a.elements=void 0,a.state={inputVal:"",elements:[]},setTimeout(a.init.bind(Object(y.a)(a)),200),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"init",value:function(){this.setSearch(this.field)}},{key:"setSearch",value:function(e,t){this.props.firebase.doSearch({type:this.field,substr:window.document.getElementById(this.field+"SearchInput").value,updateListBind:this.props.updateList},this.props.updateStatus)}},{key:"addFiller",value:function(){0===this.props.elements.length&&this.props.updateList(v,this.field)}},{key:"addButtonClick",value:function(){var e=this,t=prompt("Enter a new "+this.field);return null==t?null:""===t?(alert("Cannot add empty queries to the database"),void this.props.updateStatus("Cannot add an empty field to the database")):"User"!==this.query&&"Admin"!==this.query||(t.includes("@sheltercare.org")||t.includes("@")||(t+="@sheltercare.org"),"@sheltercare.org"===t.slice(t.length-16,t.length))?(this.props.firebase.doAddHelper({type:this.field,adding:t,statusFunc:this.props.updateStatus},function(){e.props.updateField("ADD"+e.field_upper,t)}),void setTimeout(function(){e.props.firebase.doSearch({type:e.field,substr:"",updateListBind:e.props.updateList},e.props.updateStatus)},180)):(alert("Emails added must have ending @sheltercare.org"),void this.props.updateStatus("Emails added must have ending @sheltercare.org"))}},{key:"emptySearchAddButtonClick",value:function(){var e=this,t=window.document.getElementById(this.field+"SearchInput"),a=t.value;return""===a?(alert("Cannot add empty queries to the database"),void this.props.updateStatus("Cannot add an empty string to the database")):"User"!==this.query&&"Admin"!==this.query||(a.includes("@sheltercare.org")||a.includes("@")||(a+="@sheltercare.org"),"@sheltercare.org"===a.slice(a.length-16,a.length))?(this.props.firebase.doAddHelper({type:this.field,adding:a,statusFunc:this.props.updateStatus},function(){e.props.updateField("ADD"+e.field_upper,a)}),t.value="",void setTimeout(function(){e.props.firebase.doSearch({type:e.field,substr:"",updateListBind:e.props.updateList},e.props.updateStatus)},180)):(alert("Emails added must have ending @sheltercare.org"),void this.props.updateStatus("Emails added must have ending @sheltercare.org"))}},{key:"buildTable",value:function(){var e=this,t=this.props.elements.map(function(t,a){var n="";return n=t!==v?i.a.createElement("button",{id:"rem-btn",className:"btn btn-danger btn-sm",onClick:function(){e.props.firebase.doDeleteHelper({type:e.field,deleting:t,statusFunc:e.props.updateStatus},function(){e.props.updateField("DELETE"+e.field_upper,t)})}},"-"):i.a.createElement("button",{id:"addnew-btn",className:"btn btn-success btn-sm",onClick:function(){e.emptySearchAddButtonClick()}},"Add"),i.a.createElement("tr",{key:a},i.a.createElement("td",{key:a}," ",t," "),i.a.createElement("td",{id:"add-btn-td"},n))});return i.a.createElement("div",{className:"tables"},i.a.createElement("table",{className:"table"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement("input",{className:"form-control",id:this.field+"SearchInput",type:"text",placeholder:"search",onChange:function(t){e.setSearch(e.field,t)}})),i.a.createElement("td",{id:"add-btn-td"},i.a.createElement("button",{id:"add-btn",className:"btn btn-success btn-sm",onClick:function(){e.addButtonClick()}},"+")))),i.a.createElement("tbody",null,t)))}},{key:"render",value:function(){return setTimeout(this.addFiller.bind(this),1),this.buildTable()}}]),t}(i.a.Component),k=a(21),O=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"updateList",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this.props.clearList(t):this.props.updateField("ADD"+t.toUpperCase(),e)}},{key:"getField",value:function(e){var t;switch(e){case"admin":t=this.props.fields.adminField;break;case"issue":t=this.props.fields.issueField;break;case"response":t=this.props.fields.responseField;break;case"program":t=this.props.fields.programField;break;case"user":t=this.props.fields.userField;break;case"address":t=this.props.fields.addressField;break;default:t=[]}return t}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(k.Accordion,{allowMultiple:!0,className:"container-fluid"},["User","Admin","Program","Issue","Response","Address"].map(function(t){return i.a.createElement(k.AccordionItem,{key:t+"-accordian",title:"".concat(t," List")},i.a.createElement(E,{updateList:e.updateList.bind(e),query:t,firebase:e.props.firebase,updateStatus:e.props.updateStatus,updateField:e.props.updateField,elements:e.getField(t.toLowerCase())}))})))}}]),t}(i.a.Component),S=Object(o.b)(function(e){return{fields:e.fieldReducer}},function(e){return{updateStatus:function(t){e({type:"UPDATESTATUS",payload:t})},updateField:function(t,a){e({type:t,payload:a})},clearList:function(t){e({type:"CLEARLIST",payload:t})}}})(O),F=i.a.createContext(null),j=a(9),A=a.n(j),I=(a(48),a(50),{apiKey:"AIzaSyDWT1HRjJ-p0jH5pjQPtWLSVuZ2xxyWIDU",authDomain:"hfac-sc.firebaseapp.com",databaseURL:"https://hfac-sc.firebaseio.com",projectId:"hfac-sc",storageBucket:"hfac-sc.appspot.com",messagingSenderId:"432119133740"});function N(e){var t=e.replace(/\./g,"+");return t=(t=(t=(t=(t=t.replace(/#/g,"<")).replace(/\$/g,">")).replace(/\[/g,"&")).replace(/\]/g,"=")).replace(/\//g,"_")}var D=!1,C=[],w=[],L=[],R=[],U=[],T=[],B=function(){function e(){Object(c.a)(this,e),A.a.initializeApp(I),console.log("firebase intialized")}return Object(p.a)(e,[{key:"getLocal",value:function(e){var t;return"address"===e?t=C:"response"===e?t=w:"issue"===e?t=L:"program"===e?t=R:"admin"===e?t=U:"user"===e&&(t=T),t}},{key:"doSignIn",value:function(e){var t=A.a.auth();if(null!=t.currentUser||D)console.log("user already signed in"),this.checkStatus(e);else{console.log("signing in"),D=!0;var a=new A.a.auth.GoogleAuthProvider;t.signInWithPopup(a).then(function(t){!function(e,t){var a=A.a.database().ref(),n="/admins/"+N(e.email);a.child(n).once("value").then(function(a){a.exists()?t(e,!0):(alert("Signed in email is not an admin, contact system admin if this is incorrect"),A.a.auth().signOut())})}({email:t.user.email,name:t.user.displayName},e),D=!1}).catch(function(e){"auth/popup-closed-by-user"===e.code?console.log("Sign in window closed by user before finalizing authentication"):alert(e),D=!1})}}},{key:"doSignOut",value:function(e){var t=A.a.auth();null!=t.currentUser&&(t.signOut(),e(),console.log("signed out"))}},{key:"doSearch",value:function(e,t){var a=e.substr.toLowerCase();e.updateListBind("",e.type,!0);var n=this.getLocal(e.type);if(n.length>0)n.forEach(function(t){t.toLowerCase().includes(a)&&e.updateListBind(t,e.type)});else{var s=A.a.database().ref(),r="address"===e.type?"es/":"s/",i="/"+N(e.type)+r;s.child(i).once("value").then(function(t){t.exists()&&t.forEach(function(t){var s=function(e){var t=e.replace(/\+/g,".");return t=(t=(t=(t=(t=t.replace(/</g,"#")).replace(/>/g,"$")).replace(/&/g,"[")).replace(/=/g,"]")).replace(/_/g,"/")}(""+t.key);s.toLowerCase().includes(a)&&e.updateListBind(s,e.type),n.push(s)})})}}},{key:"doAddHelper",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=this.getLocal(e.type),n=A.a.database().ref(),s="address"===e.type?"es/":"s/",r=N(e.adding),i="/"+e.type+s+r;n.child(i).once("value").then(function(s){if(!s.exists()){a.includes(e.adding)||a.push(e.adding);var r={};return r[i]=!0,n.update(r),t(),void e.statusFunc("Successfully added "+e.type+" "+e.adding)}e.statusFunc(e.type+" already exists in database")}).catch(function(t){alert("An error occurred: ",t),e.statusFunc("Failed to add "+e.type+" "+e.adding+" REASON: "+t)})}},{key:"doDeleteHelper",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=this.getLocal(e.type),n=A.a.database().ref(),s="address"===e.type?"es/":"s/",r=N(e.deleting),i="/"+e.type+s+r;console.log("deleting from: ",i),n.child(i).once("value").then(function(s){if(s.exists()){var r="are you sure you want to delete the "+e.type+" "+e.deleting+"?";if(window.confirm(r)){if(n.child(i).remove(),a.includes(e.deleting)){var u=a.indexOf(e.deleting);a.splice(u,1)}t(),e.statusFunc("Successfully deleted "+e.type+" "+e.deleting)}else e.statusFunc("Deletion of "+e.type+" "+e.deleting+" aborted by user")}else alert("This "+e.type+" does not exist in the database"),e.statusFunc(e.type+" "+e.deleting+" does not exist in database")}).catch(function(t){alert("An error occurred: ",t),e.statusFunc("Failed to delete "+e.type+" "+e.deleting+"/n REASON: "+t)})}},{key:"doAddAdmin",value:function(e,t){var a={type:"admin",adding:e,statusFunc:t};this.doAddHelper(a)}},{key:"doDeleteAdmin",value:function(e,t){var a={type:"admin",deleting:e,statusFunc:t};this.doDeleteHelper(a)}},{key:"doAddUser",value:function(e,t){var a={type:"user",adding:e,statusFunc:t};this.doAddHelper(a)}},{key:"doDeleteUser",value:function(e,t){var a={type:"user",deleting:e,statusFunc:t};this.doDeleteHelper(a)}},{key:"doAddResponse",value:function(e,t){var a={type:"response",adding:e,statusFunc:t};this.doAddHelper(a)}},{key:"doDeleteResponse",value:function(e,t){var a={type:"response",deleting:e,statusFunc:t};this.doDeleteHelper(a)}},{key:"doAddIssue",value:function(e,t){var a={type:"issue",adding:e,statusFunc:t};this.doAddHelper(a)}},{key:"doDeleteIssue",value:function(e,t){var a={type:"issue",deleting:e,statusFunc:t};this.doDeleteHelper(a)}},{key:"doAddProgram",value:function(e,t){var a={type:"program",adding:e,statusFunc:t};this.doAddHelper(a)}},{key:"doDeleteProgram",value:function(e,t){var a={type:"program",deleting:e,statusFunc:t};this.doDeleteHelper(a)}},{key:"checkStatus",value:function(e){var t=A.a.auth();null!=t.currentUser?(console.log("CheckStatus says: user signed in"),e({email:t.currentUser.email,name:t.currentUser.displayName},!0)):console.log("CheckStatus says: no user signed in")}},{key:"test",value:function(){console.log("working")}}]),e}(),H=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).state={userSignedIn:!1,user:"",userName:"",isAdmin:!1},e}return Object(b.a)(t,e),Object(p.a)(t,[{key:"signOutUser",value:function(){this.props.userSignOut()}},{key:"render",value:function(){var e=void 0,t=void 0;return this.props.user.isAdmin&&(e=i.a.createElement(F.Consumer,null,function(e){return i.a.createElement(S,{firebase:e})}),t=i.a.createElement(g,{user:this.props.user})),i.a.createElement("div",null,t,e)}}]),t}(i.a.Component),x=Object(o.b)(function(e){return{user:e.userAuthReducer}},function(e){return{userSignOut:function(){e({type:"SIGNOUT"})}}})(H),P=function(e){function t(){var e;return Object(c.a)(this,t),e=Object(m.a)(this,Object(h.a)(t).call(this)),setTimeout(function(){e.props.firebase.checkStatus(e.props.userSignIn)},650),e}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"signIn"},i.a.createElement("table",{className:"signIn-table"},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,"If you are a ShelterCare admin, sign in by clicking the button below")),i.a.createElement("tr",null,i.a.createElement("td",{id:"signin-row"},i.a.createElement("button",{className:"btn btn-success btn-md",id:"signIn-button",onClick:function(){e.props.firebase.doSignIn(e.props.userSignIn)}},"Sign in!"))))))}}]),t}(i.a.Component),q=Object(o.b)(function(e){return{user:e.userAuthReducer}},function(e){return{userSignIn:function(t,a){e({type:"SIGNIN",payload:{email:t.email,userName:t.name,isAdmin:a}})}}})(P),G=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).signInComponent=i.a.createElement(F.Consumer,null,function(e){return i.a.createElement(q,{firebase:e})}),e.toRender=e.signInComponent,e}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.props.auth.userSignedIn?this.toRender=i.a.createElement(x,null):this.toRender=this.signInComponent,i.a.createElement("div",null,this.toRender)}}]),t}(i.a.Component),_=Object(o.b)(function(e){return{auth:e.userAuthReducer}},function(e){return{userSignIn:function(t){e({type:"SIGNIN",payload:t})}}})(G);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("button",{className:"btn btn-danger btn-md",id:"signOutButton",onClick:function(){e.props.firebase.doSignOut(e.props.signOutBind)}},"Sign Out")}}]),t}(i.a.Component),W=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"signOutUser",value:function(){this.props.userSignOut()}},{key:"render",value:function(){var e=this,t="",a="",n="";return this.props.user.isAdmin&&(t=i.a.createElement("li",{className:"nav-item"},i.a.createElement("a",{className:"nav-link",rel:"noopener noreferrer",target:"_blank",href:"https://docs.google.com/spreadsheets/d/1jKAy71Lb1o-dv_rnNvMlrQNqV6dxBx_UYAbNgz2Ptlk/edit?ts=5d40ce16#gid=0"}," Encounter Spreadsheet ")),a=i.a.createElement("li",{className:"nav-item"},i.a.createElement("a",{className:"nav-link",rel:"noopener noreferrer",target:"_blank",href:"/AdminGuide.pdf"}," Admin Guide "))),this.props.user.userSignedIn&&(n=i.a.createElement(F.Consumer,null,function(t){return i.a.createElement(M,{className:"btn my-2 my-sm-0",id:"signOutButton",firebase:t,signOutBind:e.signOutUser.bind(e)})})),i.a.createElement("nav",{id:"navbar-style",className:"navbar navbar-expand-lg navbar-dark bg-dark"},i.a.createElement("span",{id:"comp-name",className:"navbar-brand mb-0 h1"}," ShelterCare Admin Portal "),i.a.createElement("div",{className:"collapse navbar-collapse"},i.a.createElement("ul",{className:"navbar-nav mr-auto"},t,a)),n)}}]),t}(i.a.Component),z=Object(o.b)(function(e){return{user:e.userAuthReducer}},function(e){return{userSignOut:function(){e({type:"SIGNOUT"})}}})(W),J={userSignedIn:!1,email:"",userName:""},V={responseField:[],issueField:[],userField:[],adminField:[],programField:[],addressField:[],status:"no action taken"};function $(e){1===e.length&&e[0]===v&&e.pop()}var K=Object(d.c)(Object(d.b)({userAuthReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0,a=Object(s.a)({},e);switch(t.type){case"SIGNIN":a.email=t.payload.email,a.userName=t.payload.userName,a.userSignedIn=!0,a.isAdmin=t.payload.isAdmin;break;case"SIGNOUT":a.userSignedIn=!1,a.isAdmin=!1,a.email="",a.userName=""}return a},fieldReducer:function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,r=arguments.length>1?arguments[1]:void 0,i=Object(s.a)({},a),u=[];switch(r.type){case"UPDATESTATUS":i.status=r.payload;break;case"CLEARLIST":var l=[];switch(r.payload){case"all":(i=V).status=a.status;break;case"admin":i.adminField=l;break;case"address":i.addressField=l;break;case"issue":i.issueField=l;break;case"program":i.programField=l;break;case"response":i.responseField=l;break;case"user":i.userField=l}break;case"ADDADMIN":$(u=Object(n.a)(a.adminField)),u.push(r.payload),u.sort(),i.adminField=u;break;case"DELETEADMIN":for(t=0,e=(u=Object(n.a)(a.adminField)).length;t<e&&u[t]!==r.payload;t++);u.splice(t,1),i.adminField=u;break;case"ADDADDRESS":$(u=Object(n.a)(a.addressField)),u.push(r.payload),u.sort(),i.addressField=u;break;case"DELETEADDRESS":for(t=0,e=(u=Object(n.a)(a.addressField)).length;t<e&&u[t]!==r.payload;t++);u.splice(t,1),i.addressField=u;break;case"ADDISSUE":$(u=Object(n.a)(a.issueField)),u.push(r.payload),u.sort(),i.issueField=u;break;case"DELETEISSUE":for(t=0,e=(u=Object(n.a)(a.issueField)).length;t<e&&u[t]!==r.payload;t++);u.splice(t,1),i.issueField=u;break;case"ADDRESPONSE":$(u=Object(n.a)(a.responseField)),u.push(r.payload),u.sort(),i.responseField=u;break;case"DELETERESPONSE":for(t=0,e=(u=Object(n.a)(a.responseField)).length;t<e&&u[t]!==r.payload;t++);u.splice(t,1),i.responseField=u;break;case"ADDPROGRAM":$(u=Object(n.a)(a.programField)),u.push(r.payload),u.sort(),i.programField=u;break;case"DELETEPROGRAM":for(t=0,e=(u=Object(n.a)(a.programField)).length;t<e&&u[t]!==r.payload;t++);u.splice(t,1),i.programField=u;break;case"ADDUSER":$(u=Object(n.a)(a.userField)),u.push(r.payload),u.sort(),i.userField=u;break;case"DELETEUSER":for(t=0,e=(u=Object(n.a)(a.userField)).length;t<e&&u[t]!==r.payload;t++);u.splice(t,1),i.userField=u}return i}})),Q=new B;l.a.render(i.a.createElement(o.a,{store:K},i.a.createElement(F.Provider,{value:Q},i.a.createElement(z,null))),document.getElementById("navbar-container")),l.a.render(i.a.createElement(o.a,{store:K},i.a.createElement(F.Provider,{value:Q},i.a.createElement(_,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,1,2]]]);
//# sourceMappingURL=main.fa478616.chunk.js.map